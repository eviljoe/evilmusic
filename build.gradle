/////////////
// Plugins //
/////////////

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse'
apply plugin: 'spring-boot'

//////////////
// Settings //
//////////////

sourceCompatibility = '1.7'
version = '0.1.a'
applicationDefaultJvmArgs = ["-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000"]

/** Necessary to set the embedded Tomcat version. */
configurations.all {
  resolutionStrategy.eachDependency { DependencyResolveDetails details ->
    if (details.requested.group == 'org.apache.tomcat.embed') {
        details.useVersion '8.0.15'
    }
  }
}

/////////////////////////////////
// Repositories & Dependencies //
/////////////////////////////////

repositories {
    mavenCentral()
    mavenLocal()
}

dependencies {
    compile 'org.springframework:spring-context:4.1.1.RELEASE'
    compile 'org.springframework:spring-webmvc:4.1.1.RELEASE'
    compile 'org.springframework:spring-web:4.1.1.RELEASE'
    compile 'org.springframework.boot:spring-boot-starter-web:1.1.8.RELEASE'
    compile 'org.springframework.boot:spring-boot-starter-data-jpa:1.1.8.RELEASE'
    compile 'org.springframework.boot:spring-boot-autoconfigure:1.1.8.RELEASE'
    compile 'com.sun.jersey:jersey-server:1.18'
    compile 'com.sun.jersey:jersey-core:1.18'
    compile 'com.sun.jersey:jersey-servlet:1.18'
    compile 'org.apache.derby:derby:10.11.1.1'
    compile 'org.hibernate:hibernate-entitymanager:4.3.6.Final'
    compile 'commons-cli:commons-cli:1.2'
    compile 'junit:junit:4.11'
    compile 'org.easymock:easymock:3.2'
}

//////////////////////
// Custom Functions //
//////////////////////

/** Necessary for the spring-boot plugin. */
buildscript {
    repositories {
        maven { url "http://repo.spring.io/libs-release" }
        mavenLocal()
        mavenCentral()
    }
    dependencies {
        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.1.8.RELEASE'
    }
}